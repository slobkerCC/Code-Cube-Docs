
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../serverside-error-logging/">
      
      
        <link rel="next" href="../../datalayer-guard/intro/">
      
      
      <link rel="icon" href="../../logo.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.31">
    
    
      
        <title>Monitoring via Google Cloud - Code Cube documentation library</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.3cba04c6.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
  <!-- Google Tag Manager -->
  <script>
    (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-K6VCS5W');
  </script>
  <!-- End Google Tag Manager -->

    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#cloud-run-monitoring-and-error-logging-automation" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Code Cube documentation library" class="md-header__button md-logo" aria-label="Code Cube documentation library" data-md-component="logo">
      
  <img src="../../code cube logo white.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Code Cube documentation library
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Monitoring via Google Cloud
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
    
  
  
    
    
      
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../error-monitoring-client-side/" class="md-tabs__link">
          
  
  Tag Monitor

        </a>
      </li>
    
  

    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../datalayer-guard/intro/" class="md-tabs__link">
          
  
  DataLayer Guard

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../notifications/slack/" class="md-tabs__link">
          
  
  Alerting & Notifications

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Code Cube documentation library" class="md-nav__button md-logo" aria-label="Code Cube documentation library" data-md-component="logo">
      
  <img src="../../code cube logo white.png" alt="logo">

    </a>
    Code Cube documentation library
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" checked>
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Tag Monitor
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            Tag Monitor
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_1" >
        
          
          <label class="md-nav__link" for="__nav_1_1" id="__nav_1_1_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Installing the Tag Monitor
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_1">
            <span class="md-nav__icon md-icon"></span>
            Installing the Tag Monitor
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../error-monitoring-client-side/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Client-side set-up
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../error-monitoring-server-side/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Server-side set-up
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tag-bulk-edit/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Bulk editing your tags in GTM
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_2" checked>
        
          
          <label class="md-nav__link" for="__nav_1_2" id="__nav_1_2_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Using the Tag Monitor
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_1_2">
            <span class="md-nav__icon md-icon"></span>
            Using the Tag Monitor
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tag-inactivity/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Enabling Tag Inactivity
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../access-to-bigquery-dataset/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Access to Tag Monitor dataset(s) in BigQuery
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../consent-monitoring/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Consent Monitoring
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../serverside-error-logging/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Server-side error logging
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Monitoring via Google Cloud
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Monitoring via Google Cloud
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#cloud-run-monitoring-and-error-logging-automation" class="md-nav__link">
    <span class="md-ellipsis">
      Cloud Run Monitoring and Error Logging Automation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Cloud Run Monitoring and Error Logging Automation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#features" class="md-nav__link">
    <span class="md-ellipsis">
      Features
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Features">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cloud-run-monitoring" class="md-nav__link">
    <span class="md-ellipsis">
      Cloud Run Monitoring
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#server-side-error-logging" class="md-nav__link">
    <span class="md-ellipsis">
      Server-Side Error Logging
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resources-created-in-your-gcp-project" class="md-nav__link">
    <span class="md-ellipsis">
      Resources Created in your GCP project
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-to-enable-cloud-run-monitoring" class="md-nav__link">
    <span class="md-ellipsis">
      How to Enable Cloud Run Monitoring
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-to-enable-server-side-error-logging" class="md-nav__link">
    <span class="md-ellipsis">
      How to Enable Server-Side Error Logging
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enabling-both-configurations" class="md-nav__link">
    <span class="md-ellipsis">
      Enabling Both Configurations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#find-project-number" class="md-nav__link">
    <span class="md-ellipsis">
      How to Find Your GCP Project Number
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-service-account-key" class="md-nav__link">
    <span class="md-ellipsis">
      Creating a Service Account and Generating a Key
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Creating a Service Account and Generating a Key">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-1-create-a-service-account" class="md-nav__link">
    <span class="md-ellipsis">
      Step 1: Create a Service Account
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-2-assign-roles-to-the-service-account" class="md-nav__link">
    <span class="md-ellipsis">
      Step 2: Assign Roles to the Service Account
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-3-create-and-download-the-service-account-key" class="md-nav__link">
    <span class="md-ellipsis">
      Step 3: Create and Download the Service Account Key
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-4-upload-the-service-account-key-to-our-portal" class="md-nav__link">
    <span class="md-ellipsis">
      Step 4: Upload the Service Account Key to Our Portal
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#locate-cloud-run-resources" class="md-nav__link">
    <span class="md-ellipsis">
      Identifying Cloud Run Services and Their Regions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Identifying Cloud Run Services and Their Regions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-1-navigate-to-the-cloud-run-console" class="md-nav__link">
    <span class="md-ellipsis">
      Step 1: Navigate to the Cloud Run Console
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-2-view-cloud-run-services" class="md-nav__link">
    <span class="md-ellipsis">
      Step 2: View Cloud Run Services
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-3-identify-service-name-and-region" class="md-nav__link">
    <span class="md-ellipsis">
      Step 3: Identify Service Name and Region
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#next-steps" class="md-nav__link">
    <span class="md-ellipsis">
      Next Steps
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    DataLayer Guard
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            DataLayer Guard
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../datalayer-guard/intro/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../datalayer-guard/scraped-events/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Monitoring via scraped events
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../datalayer-guard/events-tag-manager/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Monitoring events via Tag Management
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Alerting & Notifications
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Alerting & Notifications
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../notifications/slack/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Slack Notifications
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#cloud-run-monitoring-and-error-logging-automation" class="md-nav__link">
    <span class="md-ellipsis">
      Cloud Run Monitoring and Error Logging Automation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Cloud Run Monitoring and Error Logging Automation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#features" class="md-nav__link">
    <span class="md-ellipsis">
      Features
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Features">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cloud-run-monitoring" class="md-nav__link">
    <span class="md-ellipsis">
      Cloud Run Monitoring
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#server-side-error-logging" class="md-nav__link">
    <span class="md-ellipsis">
      Server-Side Error Logging
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resources-created-in-your-gcp-project" class="md-nav__link">
    <span class="md-ellipsis">
      Resources Created in your GCP project
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-to-enable-cloud-run-monitoring" class="md-nav__link">
    <span class="md-ellipsis">
      How to Enable Cloud Run Monitoring
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-to-enable-server-side-error-logging" class="md-nav__link">
    <span class="md-ellipsis">
      How to Enable Server-Side Error Logging
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enabling-both-configurations" class="md-nav__link">
    <span class="md-ellipsis">
      Enabling Both Configurations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#find-project-number" class="md-nav__link">
    <span class="md-ellipsis">
      How to Find Your GCP Project Number
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-service-account-key" class="md-nav__link">
    <span class="md-ellipsis">
      Creating a Service Account and Generating a Key
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Creating a Service Account and Generating a Key">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-1-create-a-service-account" class="md-nav__link">
    <span class="md-ellipsis">
      Step 1: Create a Service Account
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-2-assign-roles-to-the-service-account" class="md-nav__link">
    <span class="md-ellipsis">
      Step 2: Assign Roles to the Service Account
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-3-create-and-download-the-service-account-key" class="md-nav__link">
    <span class="md-ellipsis">
      Step 3: Create and Download the Service Account Key
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-4-upload-the-service-account-key-to-our-portal" class="md-nav__link">
    <span class="md-ellipsis">
      Step 4: Upload the Service Account Key to Our Portal
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#locate-cloud-run-resources" class="md-nav__link">
    <span class="md-ellipsis">
      Identifying Cloud Run Services and Their Regions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Identifying Cloud Run Services and Their Regions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-1-navigate-to-the-cloud-run-console" class="md-nav__link">
    <span class="md-ellipsis">
      Step 1: Navigate to the Cloud Run Console
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-2-view-cloud-run-services" class="md-nav__link">
    <span class="md-ellipsis">
      Step 2: View Cloud Run Services
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-3-identify-service-name-and-region" class="md-nav__link">
    <span class="md-ellipsis">
      Step 3: Identify Service Name and Region
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#next-steps" class="md-nav__link">
    <span class="md-ellipsis">
      Next Steps
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  <h1>Monitoring via Google Cloud</h1>

<h2 id="cloud-run-monitoring-and-error-logging-automation">Cloud Run Monitoring and Error Logging Automation</h2>
<p>This implementation is designed to set up Cloud Run monitoring and server-side error logging in your Google Cloud Platform (GCP) project. Below is an overview of how the process works and the resources it will create in your GCP project.</p>
<hr />
<h3 id="features">Features</h3>
<h4 id="cloud-run-monitoring">Cloud Run Monitoring</h4>
<ul>
<li><strong>CPU and Memory Alert Policies:</strong> Alerts are set up to monitor CPU and memory usage of specified Cloud Run services for your tagging services.</li>
<li><strong>Uptime Check:</strong> Regular checks to ensure the Cloud Run services are operational.</li>
<li><strong>SSL Certificate Expiration Alert:</strong> Alerts for SSL certificate expiration of Cloud Run services.</li>
</ul>
<h4 id="server-side-error-logging">Server-Side Error Logging</h4>
<ul>
<li><strong>Logging Sink:</strong> Server logs are routed to BigQuery for detailed analysis and storage. The logs will be stored in a dataset in our GCP project for dashboarding and further analysis purposes.</li>
</ul>
<hr />
<h3 id="resources-created-in-your-gcp-project">Resources Created in your GCP project</h3>
<ol>
<li><strong>Pub/Sub Topic and Subscription</strong>      <ul>
<li>A Pub/Sub topic.</li>
<li>A Pub/Sub subscription with push configuration for Cloud Functions.</li>
</ul>
</li>
<li><strong>Notification Channel</strong><ul>
<li>A notification channel linked to the Pub/Sub topic for alerting.</li>
</ul>
</li>
<li><strong>Alert Policies</strong><ul>
<li><strong>CPU Alert Policy:</strong> Monitors CPU utilization of Cloud Run services.</li>
<li><strong>Memory Alert Policy:</strong> Monitors memory utilization of Cloud Run services.</li>
<li><strong>Uptime Check Alert Policy:</strong> Ensures Cloud Run services are up and running.</li>
<li><strong>SSL Certificate Expiration Alert Policy:</strong> Monitors SSL certificate expiration.</li>
</ul>
</li>
<li><strong>Service Account</strong><ul>
<li>A service account <code>cloud-run-monitoring@{project_id}.iam.gserviceaccount.com</code> with appropriate IAM bindings.</li>
</ul>
</li>
<li><strong>Logging Sink</strong><ul>
<li>A logging sink named <code>codecube-serverside-logs</code> routing logs to BigQuery dataset in our GCP project.</li>
</ul>
</li>
<li><strong>IAM Bindings</strong><ul>
<li>IAM roles for the service account and Pub/Sub topic.</li>
</ul>
</li>
</ol>
<hr />
<h3 id="how-to-enable-cloud-run-monitoring">How to Enable Cloud Run Monitoring</h3>
<ol>
<li><strong>Navigate to the Configuration Page:</strong><ul>
<li>Go to the <a href="https://portal.code-cube.io/tag_monitor_config" target="_blank">Tag Monitor Configuration Page</a> on our portal.</li>
</ul>
</li>
<li><strong>Access the Monitoring Tab:</strong><ul>
<li>Click on the <code>Monitoring via Google Cloud Platform</code> tab.  </li>
</ul>
</li>
<li><strong>Enable Cloud Run Monitoring:</strong><ul>
<li>Turn on the toggle for Cloud Run monitoring.</li>
</ul>
</li>
<li><strong>Enter Project Information:</strong><ul>
<li>In the project number field, enter your GCP project number.     <br />
(<a href="#find-project-number">Click here to learn how to find your project number</a>)</li>
</ul>
</li>
<li><strong>Upload Service Account Key:</strong><ul>
<li>Upload your service account key.             <br />
(<a href="#create-service-account-key">Click here to learn how to create the service account key?</a>)</li>
<li><strong>Note:</strong> This service account key will not be stored in any of our systems for privacy and security purposes.</li>
</ul>
</li>
<li><strong>Provide Cloud Run Details:</strong><ul>
<li>Enter the name and the region of your Cloud Run resources for your tagging service.             <br />
(<a href="#spot-cloud-run-resources">Click here to learn how to find the Cloud Run Details</a>)</li>
</ul>
</li>
<li><strong>Start Configuration:</strong><ul>
<li>Click on <code>Start Configuration</code> to initiate the process.</li>
</ul>
</li>
</ol>
<hr />
<h3 id="how-to-enable-server-side-error-logging">How to Enable Server-Side Error Logging</h3>
<ol>
<li><strong>Navigate to the Configuration Page:</strong><ul>
<li>Go to the <a href="https://portal.code-cube.io/tag_monitor_config" target="_blank">Tag Monitor Configuration Page</a> on our portal.</li>
</ul>
</li>
<li><strong>Access the Monitoring Tab:</strong><ul>
<li>Click on the <code>Monitoring via Google Cloud Platform</code> tab.</li>
</ul>
</li>
<li><strong>Enable Server-Side Error Logging:</strong><ul>
<li>Turn on the toggle for server-side error logging.</li>
</ul>
</li>
<li><strong>Upload Service Account Key:</strong><ul>
<li>Upload your service account key.          <br />
(<a href="#create-service-account-key">Click here to learn how to create the service account key?</a>)</li>
<li><strong>Note:</strong> This service account key will not be stored in any of our systems for privacy and security purposes.</li>
</ul>
</li>
<li><strong>Start Configuration:</strong><ul>
<li>Click on <code>Start Configuration</code> to initiate the process.</li>
</ul>
</li>
</ol>
<hr />
<h3 id="enabling-both-configurations">Enabling Both Configurations</h3>
<p>If you wish to enable both Cloud Run monitoring and server-side error logging:</p>
<ol>
<li><strong>Turn On Both Toggles:</strong><ul>
<li>Enable the toggles for both Cloud Run monitoring and server-side error logging.</li>
</ul>
</li>
<li><strong>Follow the Steps:</strong><ul>
<li>Follow the respective steps for each configuration as outlined above.</li>
</ul>
</li>
</ol>
<hr />
<h3 id="find-project-number">How to Find Your GCP Project Number</h3>
<ol>
<li><strong>Log in to the Google Cloud Console</strong>:<ul>
<li>Visit <a href="https://console.cloud.google.com/">Google Cloud Console</a>.</li>
<li>Sign in with your Google account if you're not already logged in.</li>
</ul>
</li>
<li><strong>Select Your Project</strong>:<ul>
<li>In the top navigation bar, click on the project drop-down menu (typically displaying the name of your currently selected project).</li>
<li>If you have multiple projects, select the one you want from the list.</li>
</ul>
</li>
<li><strong>Locate the Project Number</strong>:<ul>
<li>After selecting your project, the <strong>Project Info</strong> panel will appear on the dashboard.</li>
<li>Your <strong>Project number</strong> will be displayed in this panel, usually right below the project name. </li>
</ul>
</li>
</ol>
<hr />
<h3 id="create-service-account-key">Creating a Service Account and Generating a Key</h3>
<p>To enable the automation of monitoring and management processes, you need to create a Google Cloud Service Account with specific permissions. Follow these steps to create the service account, assign the necessary roles, and generate a service account key for upload to our <a href="https://portal.code-cube.io/tag_monitor_config" target="_blank">portal</a>.</p>
<h4 id="step-1-create-a-service-account">Step 1: Create a Service Account</h4>
<ol>
<li><strong>Navigate to the Google Cloud Console</strong><ul>
<li>Open the <a href="https://console.cloud.google.com/">Google Cloud Console</a>.</li>
</ul>
</li>
<li><strong>Select Your Project:</strong><ul>
<li>Ensure you have the correct project selected from the project selector dropdown at the top of the page.</li>
</ul>
</li>
<li><strong>Go to the Service Accounts Page</strong><ul>
<li>Navigate to <code>IAM &amp; Admin</code> &gt; <code>Service Accounts</code>.</li>
</ul>
</li>
<li><strong>Create a New Service Account</strong><ul>
<li>Click the <code>+ CREATE SERVICE ACCOUNT</code> button.</li>
<li>Enter a name, ID, and description for the service account.</li>
<li>Click <code>CREATE AND CONTINUE</code>.</li>
</ul>
</li>
</ol>
<h4 id="step-2-assign-roles-to-the-service-account">Step 2: Assign Roles to the Service Account</h4>
<p>Assign the following roles to the service account to grant it the necessary permissions:</p>
<ol>
<li><strong>Pub/Sub Admin:</strong><ul>
<li>Resource: <code>google_pubsub_topic</code></li>
<li>Role: <code>roles/pubsub.admin</code></li>
</ul>
</li>
<li><strong>Monitoring Notification Channel Admin:</strong><ul>
<li>Resource: <code>google_monitoring_notification_channel</code></li>
<li>Role: <code>roles/monitoring.notificationChannelAdmin</code></li>
</ul>
</li>
<li><strong>Monitoring Alert Policy Admin:</strong><ul>
<li>Resource: <code>google_monitoring_alert_policy</code></li>
<li>Role: <code>roles/monitoring.alertPolicyAdmin</code></li>
</ul>
</li>
<li><strong>Service Account Admin:</strong><ul>
<li>Resources: <code>google_pubsub_topic_iam_member</code>, <code>google_project_iam_binding</code></li>
<li>Role: <code>roles/iam.serviceAccountAdmin</code></li>
</ul>
</li>
<li><strong>Pub/Sub Admin:</strong><ul>
<li>Resource: <code>google_pubsub_subscription</code></li>
<li>Role: <code>roles/pubsub.admin</code></li>
</ul>
</li>
<li><strong>Monitoring Uptime Check Admin:</strong><ul>
<li>Resource: <code>google_monitoring_uptime_check_config</code></li>
<li>Role: <code>roles/monitoring.uptimeCheckAdmin</code></li>
</ul>
</li>
<li><strong>Logging Admin:</strong><ul>
<li>Resource: <code>google_logging_project_sink</code></li>
<li>Role: <code>roles/logging.admin</code></li>
</ul>
</li>
<li><strong>Config Writer:</strong><ul>
<li>Resource: <code>google_logging_project_sink</code></li>
<li>Role: <code>roles/config.writer</code></li>
<li>After adding all the roles, click <code>DONE</code>.  </li>
</ul>
</li>
</ol>
<p><strong>Note</strong>: You can also set the <strong>owner</strong> role to include all above-mentioned permissions to the service account at once. </p>
<h4 id="step-3-create-and-download-the-service-account-key">Step 3: Create and Download the Service Account Key</h4>
<ol>
<li><strong>Generate a New Key:</strong><ul>
<li>In the <code>Service Accounts</code> page, find the service account you created.</li>
<li>Click the <code>â‹®</code> (three vertical dots) at the end of the service account row, then click <code>Manage keys</code>.</li>
</ul>
</li>
<li><strong>Add Key:</strong><ul>
<li>Click <code>ADD KEY</code> &gt; <code>Create new key</code>.</li>
</ul>
</li>
<li><strong>Select Key Type:</strong><ul>
<li>Choose the <code>JSON</code> key type and click <code>CREATE</code>.</li>
</ul>
</li>
<li><strong>Download Key:</strong><ul>
<li>The key will automatically download to your computer. Keep this file secure, as it contains the credentials required to access the service account.</li>
</ul>
</li>
</ol>
<h4 id="step-4-upload-the-service-account-key-to-our-portal">Step 4: Upload the Service Account Key to Our Portal</h4>
<ol>
<li><strong>Access Our Portal:</strong><ul>
<li>Log in to our <a href="https://portal.code-cube.io/tag_monitor_config" target="_blank">portal</a> where the key is required for upload.</li>
</ul>
</li>
<li><strong>Upload the Key:</strong><ul>
<li>Navigate to the section where the service account key upload is requested.</li>
<li>Click the <code>Upload</code> button and select the JSON key file you downloaded earlier.</li>
<li>Follow any additional instructions provided to complete the upload process.</li>
</ul>
</li>
</ol>
<p>By completing these steps, you will have successfully created a service account with the required permissions and provided the necessary credentials for our portal to automate and manage processes effectively.</p>
<hr />
<h3 id="locate-cloud-run-resources">Identifying Cloud Run Services and Their Regions</h3>
<p>To manage and monitor your Cloud Run services, you need to know the name and region of each service used for your tagging service. Follow these steps to locate your Cloud Run services and identify their corresponding names and regions.</p>
<h4 id="step-1-navigate-to-the-cloud-run-console">Step 1: Navigate to the Cloud Run Console</h4>
<ol>
<li><strong>Open the Google Cloud Console:</strong><ul>
<li>Go to the <a href="https://console.cloud.google.com/">Google Cloud Console</a>.</li>
</ul>
</li>
<li><strong>Select Your Project:</strong><ul>
<li>Ensure you have the correct project selected from the project selector dropdown at the top of the page.</li>
</ul>
</li>
<li><strong>Access Cloud Run:</strong><ul>
<li>From the navigation menu, go to <code>Cloud Run</code> under the <code>Serverless</code> section.</li>
</ul>
</li>
</ol>
<h4 id="step-2-view-cloud-run-services">Step 2: View Cloud Run Services</h4>
<ol>
<li><strong>List of Services:</strong><ul>
<li>On the Cloud Run page, you will see a list of all Cloud Run services deployed in your project.</li>
</ul>
</li>
<li><strong>Service Details:</strong><ul>
<li>Each row in the list represents a Cloud Run service. The primary details displayed include:<ul>
<li><strong>Service Name:</strong> The name of the Cloud Run service.</li>
<li><strong>Region:</strong> The region where the service is deployed.</li>
</ul>
</li>
</ul>
</li>
</ol>
<h4 id="step-3-identify-service-name-and-region">Step 3: Identify Service Name and Region</h4>
<ol>
<li><strong>Service Name:</strong><ul>
<li>The service name is displayed in the <code>Service</code> column. This is the identifier you use to manage and reference the service within your project.</li>
</ul>
</li>
<li><strong>Region:</strong><ul>
<li>The region is displayed in the <code>Region</code> column. This indicates the geographical location where the service is deployed, which is crucial for understanding latency and data residency.</li>
</ul>
</li>
</ol>
<p>By following these steps, you will be able to easily locate all Cloud Run services within your project and identify their names and regions needed for the implementation.</p>
<hr />
<h3 id="next-steps">Next Steps</h3>
<p>By following these steps, Cloud Run monitoring and/or server-side error logging will be implemented and enabled for you. </p>
<p><strong>What's Next?</strong>          </p>
<p><strong>Enable Notification Methods</strong>    <br />
Set up your preferred notification methods (e.g., email or Slack) to receive alerts when an event occurs. </p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.top", "navigation.path", "navigation.sections", "navigation.tabs"], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.fe8b6f2b.min.js"></script>
      
    
  </body>
</html>